# Railway config: QR Menu API (Express + Socket.IO)
# Server service only. Root Directory = / (repo root). Config path = /apps/server/railway.toml.

[build]
builder = "RAILPACK"
buildCommand = "corepack enable && pnpm install && pnpm --filter @qr-menu/server exec prisma generate && pnpm --filter @qr-menu/server run build"
watchPatterns = ["apps/server/**", "packages/**", "pnpm-workspace.yaml", "pnpm-lock.yaml"]

[deploy]
startCommand = "pnpm --filter @qr-menu/server exec prisma generate && node apps/server/dist/index.js"
