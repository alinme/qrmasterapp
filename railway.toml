# Railway config: QR Menu API (Express + Socket.IO)
# Deploy from repo root. Use this file for the server service.
# Ensure Root Directory is / (repo root) in Railway dashboard.
# OLD: startCommand = "node apps/server/dist/index.js"

[build]
builder = "RAILPACK"
buildCommand = "corepack enable && pnpm install && pnpm --filter @qr-menu/server exec prisma generate && pnpm --filter @qr-menu/server run build"
watchPatterns = ["apps/server/**", "packages/**", "pnpm-workspace.yaml", "pnpm-lock.yaml"]

[deploy]
startCommand = "pnpm --filter @qr-menu/server exec prisma generate && node apps/server/dist/index.js"
